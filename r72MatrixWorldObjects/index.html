<!<!DOCTYPE html>
<html>
<head>
<script src="three.min.js" /></script>    
</head>
<body>
    <script>



setTimeout(function(){
    var scene = new THREE.Scene();
    for ( var i = 0; i < 50000; i ++ ) {
        var mesh = new THREE.Object3D( );
        mesh.position.x = Math.random() * 8000 - 4000;
        mesh.position.y = Math.random() * 8000 - 4000;
        mesh.position.z = Math.random() * 8000 - 4000;
        mesh.rotation.x = Math.random() * 2 * Math.PI;
        mesh.rotation.y = Math.random() * 2 * Math.PI;
        mesh.scale.x = mesh.scale.y = mesh.scale.z = Math.random() * 50 + 100;
        scene.add( mesh );
    }
    
        console.time("init");
        scene.updateMatrixWorld();
        console.timeEnd("init");
        
        
           
        for ( var i = 0; i < 10; i ++ ) {
            console.time("not moved");
            scene.updateMatrixWorld();
            console.timeEnd("not moved");
        }
        
        for ( var j = 0; j < 10; j ++ ) {
            for ( var i = 0; i < 50000; i ++ ) {
                var mesh = scene.children[i];
                mesh.position.x = Math.random() * 8000 - 4000;
                mesh.position.y = Math.random() * 8000 - 4000;
                mesh.position.z = Math.random() * 8000 - 4000;
                mesh.rotation.x = Math.random() * 2 * Math.PI;
                mesh.rotation.y = Math.random() * 2 * Math.PI;
                mesh.scale.x = mesh.scale.y = mesh.scale.z = Math.random() * 50 + 100;
            }
            console.time("all moved");
            scene.updateMatrixWorld();
            console.timeEnd("all moved");
        }
        
        for ( var j = 0; j < 10; j ++ ) {
            var scene = new THREE.Scene();
            for ( var i = 0; i < 50000; i ++ ) {
                var mesh = new THREE.Object3D( );
                mesh.position.x = Math.random() * 8000 - 4000;
                mesh.position.y = Math.random() * 8000 - 4000;
                mesh.position.z = Math.random() * 8000 - 4000;
                mesh.rotation.x = Math.random() * 2 * Math.PI;
                mesh.rotation.y = Math.random() * 2 * Math.PI;
                mesh.scale.x = mesh.scale.y = mesh.scale.z = Math.random() * 50 + 100;
                scene.add( mesh );
            }
            
            console.time("reinit");
            scene.updateMatrixWorld(true);
            console.timeEnd("reinit");
        } 
        for ( var j = 0; j < 10; j ++ ) {
            var scene = new THREE.Scene();
            for ( var i = 0; i < 50000; i ++ ) {
                var mesh = new THREE.Object3D( );
                scene.add( mesh );
            }
            
            console.time("reinit without moving");
            scene.updateMatrixWorld(true);
            console.timeEnd("reinit without moving");
        } 
        
        var scene = new THREE.Scene();
        
        var parent = scene;
        for ( var i = 0; i < 50; i ++ ) {
            var object3D = new THREE.Object3D( );
            parent.add( object3D );
            parent = object3D;
        };
        for ( var i = 0; i < 50000; i ++ ) {
            var mesh = new THREE.Object3D( );
            object3D.add( mesh );
        }
        for ( var j = 0; j < 10; j ++ ) {
            object3D.position.x = Math.random() * 8000 - 4000;
            object3D.position.y = Math.random() * 8000 - 4000;
            object3D.position.z = Math.random() * 8000 - 4000;
            object3D.rotation.x = Math.random() * 2 * Math.PI;
            object3D.rotation.y = Math.random() * 2 * Math.PI;
            object3D.scale.x = mesh.scale.y = mesh.scale.z = Math.random() * 50 + 100;
            
            console.time("parentchanged");
            scene.updateMatrixWorld(true);
            console.timeEnd("parentchanged");
        } 
},5000);
    </script>
</body>    
</html>